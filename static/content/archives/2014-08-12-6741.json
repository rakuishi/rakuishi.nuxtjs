{
  "categories": [
    "WordPress"
  ],
  "date": "2014-08-12T14:26:32.000Z",
  "draft": false,
  "slug": 6741,
  "title": "Tower を使って Git リポジトリを WordPress Plugin Directory（SVN）にプッシュする",
  "bodyContent": "今回、WordPress プラグインを公式 Plugin Directory に登録しました。&rarr; [記事公開前に確認アラートを表示する「One Step Before Publishing」が WordPress プラグインディレクトリに掲載されました · rakuishi.com](http://rakuishi.com/archives/6736)\n\n## プラグインを公開するまでの流れ\n\nWordPress のプラグインを公開するには、以下のステップが必要でした。\n\n1. プラグインの入った zip ファイルを提出。GitHub にある zip リンクで OK\n1. 審査後に送られてくる SVN repository URL にプッシュする\n\n[WordPress › WordPress Plugins](http://wordpress.org/plugins/about/)\n\nプラグインは Git（GitHub）で管理していたのですが、WordPress Plugin Directory は、SVN で管理されています。幸い Git には、Git と SVN を双方向にブリッジする `git svn` があるため、そのツールを使って対応します。\n\n普段 Git のために使っている [Tower](http://www.git-tower.com/) という GUI アプリが、SVN にも対応しているため、その操作を中心にした記事になります。この記事では、Git リポジトリを Wordpress SVN repository に登録するまでをメモします。\n\n## リモートリポジトリに WordPress SVN repository を追加する\n\n既に GitHub がリモートに追加されているリポジトリを開きます。\n\n[Repository Settings...] を選択します。Remotes タブ → 左下 [Add SVN Remote Repository ...] から新しく SVN をリモート先として追加します。Repository URL には、審査後のメールに記載されている URL を入力。Username と Password は、WordPress.org の情報を入力しました。\n\n![](/images/2014/08/6741_1.png)\n\nAdd したのですが、\"Please install the latest Xcode command line\" と言われる。\n\nXcode から Xcode Command Line Tools をダウンロードする必要があるみたいです。Xcode 5.1 の Command Line Tools は、以前のバージョンとは落とせる場所が違っていて、Xcode → [Xcode] → [Open Developer Tool] → [More Developer Tools...] を選択し、Apple Developer サイトからダウンロードする。\n\nダウンロード後、Mac を再起動し、もう一度 SVN レポジトリを追加する手順を踏んだのですが、まだエラーが出る。OS X Mavericks では、`git svn` に必要な Perl ライブラリとのリンクが繋がれていないみたいです。[こちら](http://blog.victorquinn.com/fix-git-svn-in-mountain-lion)の記事を見ながら、シンボリックリンクを作成する。\n\n```\n$ sudo ln -s  /Applications/Xcode.app/Contents/Developer/Library/Perl/5.16/darwin-thread-multi-2level/SVN /System/Library/Perl/Extras/5.16/SVN\n$ sudo ln -s /Applications/Xcode.app/Contents/Developer/Library/Perl/5.16/darwin-thread-multi-2level/auto/SVN/ /System/Library/Perl/Extras/5.16/auto/SVN\n```\n\nこれで SVN レポジトリを追加出来るようになります。ですが、Fetching From Remote... の処理が異常にかかる（45分かかった）。\n\n## SVN リモートにプッシュする\n\nTower の左カラムの REMOTES に SVN レポジトリが追加されました。この trunk にあるコミット履歴には「adding one-step-before-publishing by rakuishi」のような最初のコミットが既に存在している。\n\nこれを副クリックして、[Create Branch from This Commit...] → [Checkout Branch] にチェックを入れてから、新しくローカルにブランチを作ります。ブランチ名は分かりやすいように svn にした。\n\nこのローカルブランチ svn に最新のブランチをマージして、リモート trunk にプッシュすれば OK です。\n\n![](/images/2014/08/6741_2.png)\n\n## タグを発行する\n\nWordPress Plugin Directory では、タグを発行すると自動で zip のパッケージが作られるそうです。Tower 上でタグを付けて、Terminal から SVN にタグを発行しました（Tower で完結する方法が分からなかったから）。\n\n```\n$ git tag\n1.0.0\n$ git svn tag 1.0.0\n```\n\n処理後、SVN リポジトリ内 tags/ に、タグが追加されていることが確認出来ます。\n\n以上の処理を行えば、WordPress.org の Plugin Directory に掲載されます。\n\n## 参考\n\n* [WordPress › WordPress Plugins](http://wordpress.org/plugins/about/)\n* [Using Git with Subversion Mirroring for WordPress Plugin Development](https://gist.github.com/kasparsd/3749872)\n* [Solved: git svn Broken in Mavericks (or Mountain Lion)](http://blog.victorquinn.com/fix-git-svn-in-mountain-lion)\n* [GitHubにホストしていたレポジトリをWordPress.orgのSVNにSourceTree(Mac)を使ってプッシュするまで | notnil creation weblog](http://notnil-creative.com/blog/archives/2431)",
  "bodyHtml": "<p>今回、WordPress プラグインを公式 Plugin Directory に登録しました。→ <a href=\"http://rakuishi.com/archives/6736\">記事公開前に確認アラートを表示する「One Step Before Publishing」が WordPress プラグインディレクトリに掲載されました · rakuishi.com</a></p>\n<h2>プラグインを公開するまでの流れ</h2>\n<p>WordPress のプラグインを公開するには、以下のステップが必要でした。</p>\n<ol>\n<li>プラグインの入った zip ファイルを提出。GitHub にある zip リンクで OK</li>\n<li>審査後に送られてくる SVN repository URL にプッシュする</li>\n</ol>\n<p><a href=\"http://wordpress.org/plugins/about/\">WordPress › WordPress Plugins</a></p>\n<p>プラグインは Git（GitHub）で管理していたのですが、WordPress Plugin Directory は、SVN で管理されています。幸い Git には、Git と SVN を双方向にブリッジする <code>git svn</code> があるため、そのツールを使って対応します。</p>\n<p>普段 Git のために使っている <a href=\"http://www.git-tower.com/\">Tower</a> という GUI アプリが、SVN にも対応しているため、その操作を中心にした記事になります。この記事では、Git リポジトリを Wordpress SVN repository に登録するまでをメモします。</p>\n<h2>リモートリポジトリに WordPress SVN repository を追加する</h2>\n<p>既に GitHub がリモートに追加されているリポジトリを開きます。</p>\n<p>[Repository Settings...] を選択します。Remotes タブ → 左下 [Add SVN Remote Repository ...] から新しく SVN をリモート先として追加します。Repository URL には、審査後のメールに記載されている URL を入力。Username と Password は、WordPress.org の情報を入力しました。</p>\n<p><img src=\"/images/2014/08/6741_1.png\" alt=\"\"></p>\n<p>Add したのですが、&quot;Please install the latest Xcode command line&quot; と言われる。</p>\n<p>Xcode から Xcode Command Line Tools をダウンロードする必要があるみたいです。Xcode 5.1 の Command Line Tools は、以前のバージョンとは落とせる場所が違っていて、Xcode → [Xcode] → [Open Developer Tool] → [More Developer Tools...] を選択し、Apple Developer サイトからダウンロードする。</p>\n<p>ダウンロード後、Mac を再起動し、もう一度 SVN レポジトリを追加する手順を踏んだのですが、まだエラーが出る。OS X Mavericks では、<code>git svn</code> に必要な Perl ライブラリとのリンクが繋がれていないみたいです。<a href=\"http://blog.victorquinn.com/fix-git-svn-in-mountain-lion\">こちら</a>の記事を見ながら、シンボリックリンクを作成する。</p>\n<pre><code>$ sudo ln -s  /Applications/Xcode.app/Contents/Developer/Library/Perl/5.16/darwin-thread-multi-2level/SVN /System/Library/Perl/Extras/5.16/SVN\n$ sudo ln -s /Applications/Xcode.app/Contents/Developer/Library/Perl/5.16/darwin-thread-multi-2level/auto/SVN/ /System/Library/Perl/Extras/5.16/auto/SVN\n</code></pre>\n<p>これで SVN レポジトリを追加出来るようになります。ですが、Fetching From Remote... の処理が異常にかかる（45分かかった）。</p>\n<h2>SVN リモートにプッシュする</h2>\n<p>Tower の左カラムの REMOTES に SVN レポジトリが追加されました。この trunk にあるコミット履歴には「adding one-step-before-publishing by rakuishi」のような最初のコミットが既に存在している。</p>\n<p>これを副クリックして、[Create Branch from This Commit...] → [Checkout Branch] にチェックを入れてから、新しくローカルにブランチを作ります。ブランチ名は分かりやすいように svn にした。</p>\n<p>このローカルブランチ svn に最新のブランチをマージして、リモート trunk にプッシュすれば OK です。</p>\n<p><img src=\"/images/2014/08/6741_2.png\" alt=\"\"></p>\n<h2>タグを発行する</h2>\n<p>WordPress Plugin Directory では、タグを発行すると自動で zip のパッケージが作られるそうです。Tower 上でタグを付けて、Terminal から SVN にタグを発行しました（Tower で完結する方法が分からなかったから）。</p>\n<pre><code>$ git tag\n1.0.0\n$ git svn tag 1.0.0\n</code></pre>\n<p>処理後、SVN リポジトリ内 tags/ に、タグが追加されていることが確認出来ます。</p>\n<p>以上の処理を行えば、WordPress.org の Plugin Directory に掲載されます。</p>\n<h2>参考</h2>\n<ul>\n<li><a href=\"http://wordpress.org/plugins/about/\">WordPress › WordPress Plugins</a></li>\n<li><a href=\"https://gist.github.com/kasparsd/3749872\">Using Git with Subversion Mirroring for WordPress Plugin Development</a></li>\n<li><a href=\"http://blog.victorquinn.com/fix-git-svn-in-mountain-lion\">Solved: git svn Broken in Mavericks (or Mountain Lion)</a></li>\n<li><a href=\"http://notnil-creative.com/blog/archives/2431\">GitHubにホストしていたレポジトリをWordPress.orgのSVNにSourceTree(Mac)を使ってプッシュするまで | notnil creation weblog</a></li>\n</ul>\n",
  "dir": "static/content/archives",
  "base": "2014-08-12-6741.json",
  "ext": ".json",
  "sourceBase": "2014-08-12-6741.md",
  "sourceExt": ".md"
}