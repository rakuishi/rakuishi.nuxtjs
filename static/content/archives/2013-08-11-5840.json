{
  "categories": [
    "Android"
  ],
  "date": "2013-08-11T01:38:56.000Z",
  "draft": false,
  "slug": 5840,
  "title": "[Android] 固定ヘッダー・フッター付きの ListView を作成する",
  "bodyContent": "ListView の上下に固定の View を作成したい場合があります。固定の View に広告ネットワークを載せる時とかですね。この固定の View は、ListView 内をスクロールしても位置が固定されるものを想定しています。\n\n他のブログ記事にも実装方法は載っているのですが、xml で記述する方法しかなかったので、全部 .java ファイルに記述する方法（Programatically）をこの記事では紹介します。\n\n## 固定ヘッダー・フッター付きの ListView\n\n```\npublic class MainActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        // 全体\n        LinearLayout linearLayout = new LinearLayout(this);\n        linearLayout.setLayoutParams(new LinearLayout.LayoutParams(\n                LinearLayout.LayoutParams.WRAP_CONTENT,\n                LinearLayout.LayoutParams.WRAP_CONTENT)\n        );\n        linearLayout.setOrientation(LinearLayout.VERTICAL);\n\n        // ヘッダー部分\n        LinearLayout adViewLayout = new LinearLayout(this);\n        adViewLayout.setLayoutParams(new LinearLayout.LayoutParams(\n                LinearLayout.LayoutParams.MATCH_PARENT,\n                LinearLayout.LayoutParams.WRAP_CONTENT)\n        );\n        adViewLayout.setBackgroundColor(Color.BLACK);\n        adViewLayout.setGravity(Gravity.CENTER_HORIZONTAL);\n\n        Button button = new Button(this);\n        button.setText(\"広告\");\n        adViewLayout.addView(button);\n\n        // ListView\n        String[] array = {\"北海道\", \"青森県\", \"岩手県\", \"宮城県\", \"秋田県\", \"山形県\", \"福島県\", \"茨城県\", \"栃木県\", \"群馬県\", \"埼玉県\", \"千葉県\", \"東京都\", \"神奈川県\", \"新潟県\", \"富山県\", \"石川県\", \"福井県\", \"山梨県\", \"長野県\", \"岐阜県\", \"静岡県\", \"愛知県\", \"三重県\", \"滋賀県\", \"京都府\", \"大阪府\", \"兵庫県\", \"奈良県\", \"和歌山県\", \"鳥取県\", \"島根県\", \"岡山県\", \"広島県\", \"山口県\", \"徳島県\", \"香川県\", \"愛媛県\", \"高知県\", \"福岡県\", \"佐賀県\", \"長崎県\", \"熊本県\", \"大分県\", \"宮崎県\", \"鹿児島県\", \"沖縄県\"};\n        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, array);\n        ListView listView = new ListView(this);\n        listView.setAdapter(adapter); // リストビューにアダプタを設定\n        listView.setLayoutParams(new LinearLayout.LayoutParams(\n                LinearLayout.LayoutParams.MATCH_PARENT,\n                LinearLayout.LayoutParams.MATCH_PARENT,\n                1.f)\n        );\n\n        linearLayout.addView(adViewLayout);\n        linearLayout.addView(listView);\n\n        setContentView(linearLayout);\n    }\n}\n```\n\n最後の linearLayout.addView(adViewLayout) と linearLayout.addView(listView) の位置を入れ替えることで、ヘッダーもしくはフッターが固定されます。\n\n## 実行結果\n\n![](/images/2013/08/5840_1.png)",
  "bodyHtml": "<p>ListView の上下に固定の View を作成したい場合があります。固定の View に広告ネットワークを載せる時とかですね。この固定の View は、ListView 内をスクロールしても位置が固定されるものを想定しています。</p>\n<p>他のブログ記事にも実装方法は載っているのですが、xml で記述する方法しかなかったので、全部 .java ファイルに記述する方法（Programatically）をこの記事では紹介します。</p>\n<h2>固定ヘッダー・フッター付きの ListView</h2>\n<pre><code>public class MainActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        // 全体\n        LinearLayout linearLayout = new LinearLayout(this);\n        linearLayout.setLayoutParams(new LinearLayout.LayoutParams(\n                LinearLayout.LayoutParams.WRAP_CONTENT,\n                LinearLayout.LayoutParams.WRAP_CONTENT)\n        );\n        linearLayout.setOrientation(LinearLayout.VERTICAL);\n\n        // ヘッダー部分\n        LinearLayout adViewLayout = new LinearLayout(this);\n        adViewLayout.setLayoutParams(new LinearLayout.LayoutParams(\n                LinearLayout.LayoutParams.MATCH_PARENT,\n                LinearLayout.LayoutParams.WRAP_CONTENT)\n        );\n        adViewLayout.setBackgroundColor(Color.BLACK);\n        adViewLayout.setGravity(Gravity.CENTER_HORIZONTAL);\n\n        Button button = new Button(this);\n        button.setText(&quot;広告&quot;);\n        adViewLayout.addView(button);\n\n        // ListView\n        String[] array = {&quot;北海道&quot;, &quot;青森県&quot;, &quot;岩手県&quot;, &quot;宮城県&quot;, &quot;秋田県&quot;, &quot;山形県&quot;, &quot;福島県&quot;, &quot;茨城県&quot;, &quot;栃木県&quot;, &quot;群馬県&quot;, &quot;埼玉県&quot;, &quot;千葉県&quot;, &quot;東京都&quot;, &quot;神奈川県&quot;, &quot;新潟県&quot;, &quot;富山県&quot;, &quot;石川県&quot;, &quot;福井県&quot;, &quot;山梨県&quot;, &quot;長野県&quot;, &quot;岐阜県&quot;, &quot;静岡県&quot;, &quot;愛知県&quot;, &quot;三重県&quot;, &quot;滋賀県&quot;, &quot;京都府&quot;, &quot;大阪府&quot;, &quot;兵庫県&quot;, &quot;奈良県&quot;, &quot;和歌山県&quot;, &quot;鳥取県&quot;, &quot;島根県&quot;, &quot;岡山県&quot;, &quot;広島県&quot;, &quot;山口県&quot;, &quot;徳島県&quot;, &quot;香川県&quot;, &quot;愛媛県&quot;, &quot;高知県&quot;, &quot;福岡県&quot;, &quot;佐賀県&quot;, &quot;長崎県&quot;, &quot;熊本県&quot;, &quot;大分県&quot;, &quot;宮崎県&quot;, &quot;鹿児島県&quot;, &quot;沖縄県&quot;};\n        ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.simple_list_item_1, array);\n        ListView listView = new ListView(this);\n        listView.setAdapter(adapter); // リストビューにアダプタを設定\n        listView.setLayoutParams(new LinearLayout.LayoutParams(\n                LinearLayout.LayoutParams.MATCH_PARENT,\n                LinearLayout.LayoutParams.MATCH_PARENT,\n                1.f)\n        );\n\n        linearLayout.addView(adViewLayout);\n        linearLayout.addView(listView);\n\n        setContentView(linearLayout);\n    }\n}\n</code></pre>\n<p>最後の linearLayout.addView(adViewLayout) と linearLayout.addView(listView) の位置を入れ替えることで、ヘッダーもしくはフッターが固定されます。</p>\n<h2>実行結果</h2>\n<p><img src=\"/images/2013/08/5840_1.png\" alt=\"\"></p>\n",
  "dir": "static/content/archives",
  "base": "2013-08-11-5840.json",
  "ext": ".json",
  "sourceBase": "2013-08-11-5840.md",
  "sourceExt": ".md"
}