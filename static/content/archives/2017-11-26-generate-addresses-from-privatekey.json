{
  "categories": [
    "Cryptocurrency"
  ],
  "date": "2017-11-26T00:11:22.000Z",
  "draft": false,
  "slug": "generate-addresses-from-privatekey",
  "title": "「お客様用ビットコインアドレスは変わることがあります。」ってどういうこと？ビットコインのアドレスが複数作られる仕組みとは",
  "subtitle": "秘密鍵からアドレスを作りだす一方向の仕組みと、ある Seed から複数の秘密鍵・アドレスを作れる仕組みから、その謎を解き明かしていきます。",
  "bodyContent": "[bitFlyer](https://bitflyer.jp/?bf=hus1mkdt) でビットコインの受け取り用のアドレス確認画面の注意書きに「お客様用ビットコインアドレスは変わることがあります。」と書かれています。\n\n<img src=\"/images/2017/11/generate-addresses-from-privatekey-1.png\" alt=\"お客様用ビットコインアドレスは変わることがあります。\">\n\n最初は「え？口座番号が変わるってどういうこと？受け取るのに支障がないの？」と思ったのですが、ビットコインの仕組みを調べていくうちに、便利な仕組みだなと唸りました。便利であると同時に匿名性をもたらすため、悪用される恐れもあるのですが。\n\nこの記事では、まずはビットコインアドレスの生成方法について触れ、その後、複数のアドレスを持てる仕組みを紹介していきます。\n\n## ビットコインの秘密鍵とアドレスを作ってみよう\n\nビットコインのアドレスは、秘密鍵（プライベートキー）から計算できます。秘密鍵もアドレスも、半角英数を組み合わせた長い文字列のことです。といっても、想像しにくいと思いますので、まずは [bitaddress.org](https://www.bitaddress.org/) から使い捨ての秘密鍵とアドレスを作ってみましょう。\n\nこの秘密鍵はランダムに生成されます。bitaddress.org では、ユーザーのマウスのランダムな動きから秘密鍵を生成しています。このランダムな数値を作る難しさは、参考記事が詳しいです。→ [乱数生成器とゲームと諜報活動の話｜Rui Ueyama｜note](https://note.mu/ruiu/n/nb5c3fe7e4e7d)\n\n<img src=\"/images/2017/11/generate-addresses-from-privatekey-2.png\">\n\n100% にすると、秘密鍵（プライベートキー）とアドレスが生成されます。本当はこの秘密鍵は誰にも漏らしてはいけません。それぞれ長い文字列が生成されているのが分かります。\n\n<img src=\"/images/2017/11/generate-addresses-from-privatekey-3.png\">\n\n## 秘密鍵からアドレスを作る仕組み\n\n秘密鍵は、誰にも漏らしていけはない変わることのない文字列です。この秘密鍵からはアドレスが計算によって求められます（本当は途中に公開鍵の計算が入りますが省略しています）。\n\n- **アドレス ＝ 秘密鍵にある計算処理をする**\n\nしかし、この計算処理は、秘密鍵からはアドレスを求められますが、アドレスからは秘密鍵を求められません。このような計算処理のことを一方向性関数といいます。この関数の特性は、現在の暗号処理の根幹をなす機能であり、このことから暗号通貨と呼ばれているのだと思います。\n\nビットコインにとって、秘密鍵を知られるのは口座番号とパスワードを渡すのと同じ行為です。しかし、**口座番号（アドレス）を知られても、秘密鍵をそこから計算できない**ということです。\n\n## Seed から複数の秘密鍵・アドレスを作れる HD ウォレット\n\nひとつの秘密鍵からはひとつのアドレスが作れることを見てきました。ちなみに、新しい用語になりますが、**秘密鍵とアドレスのセットをウォレット**といいます。さて、ここからは bitFlyer の注意書きに迫っていきます。\n\nこのウォレットにはいくつかの種類があり、HD ウォレット（階層的決定性ウォレット、Hierarchical Deterministic Wallet）では、ひとつの Seed（種）から複数の秘密鍵を作ることができます。\n\nこのことから、恐らく bitFlyer では、この HD ウォレットのような、**ひとつの Seed から複数の秘密鍵、そこから複数のアドレスを作れるウォレット**を採用していることが想像できます（ちなみに、bitFlyer のようなオンライン上にある仮想通貨取引所を利用する場合は、秘密鍵を取引所に預けている状態）。\n\nSeed から複数のアドレスが作れるタイプのウォレットを使える場合は、アドレスを適宜変えることが推奨されています。何故なら、アドレスに対するやりとりは、ブロックチェーン上でオープンに公開されているからです。アドレスを変えた場合、そこから逆算して他のアドレスや秘密鍵を求めることはできないため、結局、誰のもとに届いたのはかわかりません。\n\nこのような理由から、bitFlyer では、都合の良いタイミングでアドレスが変わることがあるということですね。\n\n{{<cryptocurrency>}}\n\n## 参考\n\n- <a href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4757103670/rakuishi-22/ref=nosim/\" name=\"amazletlink\" target=\"_blank\">ビットコインとブロックチェーン:暗号通貨を支える技術</a>\n- <a href=\"http://www.amazon.co.jp/exec/obidos/ASIN/410215972X/rakuishi-22/ref=nosim/\" name=\"amazletlink\" target=\"_blank\">暗号解読〈上〉 (新潮文庫)</a>\n- <a href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4102159738/rakuishi-22/ref=nosim/\" name=\"amazletlink\" target=\"_blank\">暗号解読 下巻 (新潮文庫)</a>\n- [address - How are different Addresses generated from the same Private key? - Bitcoin Stack Exchange](https://bitcoin.stackexchange.com/questions/48322/how-are-different-addresses-generated-from-the-same-private-key)",
  "bodyHtml": "<p><a href=\"https://bitflyer.jp/?bf=hus1mkdt\">bitFlyer</a> でビットコインの受け取り用のアドレス確認画面の注意書きに「お客様用ビットコインアドレスは変わることがあります。」と書かれています。</p>\n<p>&lt;img src=&quot;/images/2017/11/generate-addresses-from-privatekey-1.png&quot; alt=&quot;お客様用ビットコインアドレスは変わることがあります。&quot;&gt;</p>\n<p>最初は「え？口座番号が変わるってどういうこと？受け取るのに支障がないの？」と思ったのですが、ビットコインの仕組みを調べていくうちに、便利な仕組みだなと唸りました。便利であると同時に匿名性をもたらすため、悪用される恐れもあるのですが。</p>\n<p>この記事では、まずはビットコインアドレスの生成方法について触れ、その後、複数のアドレスを持てる仕組みを紹介していきます。</p>\n<h2>ビットコインの秘密鍵とアドレスを作ってみよう</h2>\n<p>ビットコインのアドレスは、秘密鍵（プライベートキー）から計算できます。秘密鍵もアドレスも、半角英数を組み合わせた長い文字列のことです。といっても、想像しにくいと思いますので、まずは <a href=\"https://www.bitaddress.org/\">bitaddress.org</a> から使い捨ての秘密鍵とアドレスを作ってみましょう。</p>\n<p>この秘密鍵はランダムに生成されます。bitaddress.org では、ユーザーのマウスのランダムな動きから秘密鍵を生成しています。このランダムな数値を作る難しさは、参考記事が詳しいです。→ <a href=\"https://note.mu/ruiu/n/nb5c3fe7e4e7d\">乱数生成器とゲームと諜報活動の話｜Rui Ueyama｜note</a></p>\n<p>&lt;img src=&quot;/images/2017/11/generate-addresses-from-privatekey-2.png&quot;&gt;</p>\n<p>100% にすると、秘密鍵（プライベートキー）とアドレスが生成されます。本当はこの秘密鍵は誰にも漏らしてはいけません。それぞれ長い文字列が生成されているのが分かります。</p>\n<p>&lt;img src=&quot;/images/2017/11/generate-addresses-from-privatekey-3.png&quot;&gt;</p>\n<h2>秘密鍵からアドレスを作る仕組み</h2>\n<p>秘密鍵は、誰にも漏らしていけはない変わることのない文字列です。この秘密鍵からはアドレスが計算によって求められます（本当は途中に公開鍵の計算が入りますが省略しています）。</p>\n<ul>\n<li><strong>アドレス ＝ 秘密鍵にある計算処理をする</strong></li>\n</ul>\n<p>しかし、この計算処理は、秘密鍵からはアドレスを求められますが、アドレスからは秘密鍵を求められません。このような計算処理のことを一方向性関数といいます。この関数の特性は、現在の暗号処理の根幹をなす機能であり、このことから暗号通貨と呼ばれているのだと思います。</p>\n<p>ビットコインにとって、秘密鍵を知られるのは口座番号とパスワードを渡すのと同じ行為です。しかし、<strong>口座番号（アドレス）を知られても、秘密鍵をそこから計算できない</strong>ということです。</p>\n<h2>Seed から複数の秘密鍵・アドレスを作れる HD ウォレット</h2>\n<p>ひとつの秘密鍵からはひとつのアドレスが作れることを見てきました。ちなみに、新しい用語になりますが、<strong>秘密鍵とアドレスのセットをウォレット</strong>といいます。さて、ここからは bitFlyer の注意書きに迫っていきます。</p>\n<p>このウォレットにはいくつかの種類があり、HD ウォレット（階層的決定性ウォレット、Hierarchical Deterministic Wallet）では、ひとつの Seed（種）から複数の秘密鍵を作ることができます。</p>\n<p>このことから、恐らく bitFlyer では、この HD ウォレットのような、<strong>ひとつの Seed から複数の秘密鍵、そこから複数のアドレスを作れるウォレット</strong>を採用していることが想像できます（ちなみに、bitFlyer のようなオンライン上にある仮想通貨取引所を利用する場合は、秘密鍵を取引所に預けている状態）。</p>\n<p>Seed から複数のアドレスが作れるタイプのウォレットを使える場合は、アドレスを適宜変えることが推奨されています。何故なら、アドレスに対するやりとりは、ブロックチェーン上でオープンに公開されているからです。アドレスを変えた場合、そこから逆算して他のアドレスや秘密鍵を求めることはできないため、結局、誰のもとに届いたのはかわかりません。</p>\n<p>このような理由から、bitFlyer では、都合の良いタイミングでアドレスが変わることがあるということですね。</p>\n<p>{{&lt;cryptocurrency&gt;}}</p>\n<h2>参考</h2>\n<ul>\n<li>&lt;a href=&quot;http://www.amazon.co.jp/exec/obidos/ASIN/4757103670/rakuishi-22/ref=nosim/&quot; name=&quot;amazletlink&quot; target=&quot;_blank&quot;&gt;ビットコインとブロックチェーン:暗号通貨を支える技術&lt;/a&gt;</li>\n<li>&lt;a href=&quot;http://www.amazon.co.jp/exec/obidos/ASIN/410215972X/rakuishi-22/ref=nosim/&quot; name=&quot;amazletlink&quot; target=&quot;_blank&quot;&gt;暗号解読〈上〉 (新潮文庫)&lt;/a&gt;</li>\n<li>&lt;a href=&quot;http://www.amazon.co.jp/exec/obidos/ASIN/4102159738/rakuishi-22/ref=nosim/&quot; name=&quot;amazletlink&quot; target=&quot;_blank&quot;&gt;暗号解読 下巻 (新潮文庫)&lt;/a&gt;</li>\n<li><a href=\"https://bitcoin.stackexchange.com/questions/48322/how-are-different-addresses-generated-from-the-same-private-key\">address - How are different Addresses generated from the same Private key? - Bitcoin Stack Exchange</a></li>\n</ul>\n",
  "dir": "static/content/archives",
  "base": "2017-11-26-generate-addresses-from-privatekey.json",
  "ext": ".json",
  "sourceBase": "2017-11-26-generate-addresses-from-privatekey.md",
  "sourceExt": ".md"
}